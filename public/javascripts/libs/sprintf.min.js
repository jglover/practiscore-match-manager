!function(e){function n(){var e=arguments[0],t=n.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=n.parse(e)),n.format.call(null,t[e],arguments)}function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,n){return Array(n+1).join(e)}var s={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};n.format=function(e,o){var a,i,l,c,f,p,u,g=1,d=e.length,h="",x=[],b=!0,y="";for(i=0;d>i;i++)if(h=t(e[i]),"string"===h)x[x.length]=e[i];else if("array"===h){if(c=e[i],c[2])for(a=o[g],l=0;l<c[2].length;l++){if(!a.hasOwnProperty(c[2][l]))throw new Error(n("[sprintf] property '%s' does not exist",c[2][l]));a=a[c[2][l]]}else a=c[1]?o[c[1]]:o[g++];if("function"==t(a)&&(a=a()),s.not_string.test(c[8])&&s.not_json.test(c[8])&&"number"!=t(a)&&isNaN(a))throw new TypeError(n("[sprintf] expecting number but found %s",t(a)));switch(s.number.test(c[8])&&(b=a>=0),c[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,c[6]?parseInt(c[6]):0);break;case"e":a=c[7]?a.toExponential(c[7]):a.toExponential();break;case"f":a=c[7]?parseFloat(a).toFixed(c[7]):parseFloat(a);break;case"g":a=c[7]?parseFloat(a).toPrecision(c[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&c[7]?a.substring(0,c[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}s.json.test(c[8])?x[x.length]=a:(!s.number.test(c[8])||b&&!c[3]?y="":(y=b?"+":"-",a=a.toString().replace(s.sign,"")),p=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",u=c[6]-(y+a).length,f=c[6]&&u>0?r(p,u):"",x[x.length]=c[5]?y+a+f:"0"===p?y+f+a:f+y+a)}return x.join("")},n.cache={},n.parse=function(e){for(var n=e,t=[],r=[],o=0;n;){if(null!==(t=s.text.exec(n)))r[r.length]=t[0];else if(null!==(t=s.modulo.exec(n)))r[r.length]="%";else{if(null===(t=s.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var a=[],i=t[2],l=[];if(null===(l=s.key.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(i=i.substring(l[0].length));)if(null!==(l=s.key_access.exec(i)))a[a.length]=l[1];else{if(null===(l=s.index_access.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}t[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r[r.length]=t}n=n.substring(t[0].length)}return r};var o=function(e,t,r){return r=(t||[]).slice(0),r.splice(0,0,e),n.apply(null,r)};"undefined"!=typeof exports?(exports.sprintf=n,exports.vsprintf=o):(e.sprintf=n,e.vsprintf=o,"function"==typeof define&&define.amd&&define(function(){return{sprintf:n,vsprintf:o}}))}("undefined"==typeof window?this:window);
